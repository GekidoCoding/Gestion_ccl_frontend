<div class="main-content-dashboard">
   <app-loading [loading]="loading" ></app-loading>

    <div class="content-wrapper" [ngClass]="{ 'loading': loading }">

        <div class="filter-form-container">
            <div class="results-count">Résultats trouvés : {{historiques.length}}</div>
            <form #filterForm="ngForm" (ngSubmit)="onFilterSubmit()">
                <div class="form-group">
                    <label for="date1">Date de début</label>
                    <input
                            type="date"
                            id="date1"
                            name="date1"
                            [(ngModel)]="date1"
                            class="form-control"
                    />
                </div>
                <div class="form-group">
                    <label for="date2">Date de fin</label>
                    <input
                            type="date"
                            id="date2"
                            name="date2"
                            [(ngModel)]="date2"
                            class="form-control"
                    />
                </div>
                <div class="form-group">
                    <label for="year">Année</label>
                    <input
                            type="number"
                            id="year"
                            name="year"
                            [(ngModel)]="year"
                            min="2000"
                            max="2100"
                            class="form-control"
                    />
                </div>
                <div class="form-group">
                    <label>Type Mouvement</label>
                    <select class="form-control" name="typeMouvement" required
                            [(ngModel)]="typeMouvementId"
                    >
                        <option [ngValue]="''" >-- Sélectionner le type de mouvement --</option>
                        <option *ngFor="let type of typeMouvements" [value]="type.id">{{ type.nom }}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Categorie d'infrastructures :</label>
                    <select class="form-control" name="categorieInfraId"
                            [(ngModel)]="categorieInfraId"
                    >
                        <option [ngValue]="''" >-- Sélectionner la categorie  --</option>
                        <option *ngFor="let type of categories" [value]="type.id">{{ type.nom }}</option>
                    </select>
                </div>
                <div class="form-group col-md-3">
                    <label>Modèles</label>
                    <div class="checkbox-group">
                        <div *ngFor="let modele of filteredModeles" class="checkbox-item">
                            <input type="checkbox" [id]="'mod-' + modele.id" [(ngModel)]="modelesInfraSelectionned[modele.id]" name="modele-{{modele.id}}" (ngModelChange)="updateModeleSelection(modele.id)">
                            <label [for]="'mod-' + modele.id">{{ modele.nom }}</label>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary-dashboard">Filtrer</button>
            </form>
        </div>

        <!-- Stats Cards -->
        <div class="stats-container">
            <div class="stat-card" *ngFor="let card of statsCards" [ngClass]="'card-' + card.color">
                <div class="stat-icon">
                    <i [class]="card.icon"></i>
                </div>
                <div class="stat-content">
                    <h3>{{ card.value }}</h3>
                    <p>{{ card.title }}</p>
                </div>
            </div>
        </div>

        <div class="all-graph-container">
            <!-- Pie Chart -->
            <div class="chart-card">
                <h3><i class="now-ui-icons business_chart-pie-36"></i> Etat Statistique des mouvements</h3>
                <div class="chart-wrapper">
                    <canvas #pieChart></canvas>
                </div>
            </div>

            <!-- Line Chart -->
            <div class="chart-card">
                <h3><i class="now-ui-icons business_chart-bar-32"></i> Tableau de bord d'evolution des mouvements</h3>
                <div class="chart-wrapper">
                    <canvas #lineChart></canvas>
                </div>
            </div>
        </div>


    </div>
</div>